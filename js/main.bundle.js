(self.webpackChunksip_calculator=self.webpackChunksip_calculator||[]).push([[179],{569:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(15),i=n.n(r),o=n(645),a=n.n(o)()(i());a.push([t.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const s=a},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);r&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},15:t=>{"use strict";function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=function(t){var n,r,i=(r=4,function(t){if(Array.isArray(t))return t}(n=t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(n,r)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[1],a=i[3];if("function"==typeof btoa){var s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),u="/*# ".concat(c," */"),d=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(t," */")}));return[o].concat(d).concat([u]).join("\n")}return[o].join("\n")}},123:function(t){"undefined"!=typeof self&&self,t.exports=(()=>{"use strict";var t={407:(t,e,n)=>{n.d(e,{default:()=>x});var r=/([:*])(\w+)/g,i=/\*/g,o=/\/\?/g;function a(t){return void 0===t&&(t="/"),v()?location.pathname+location.search+location.hash:t}function s(t){return t.replace(/\/+$/,"").replace(/^\/+/,"")}function c(t){return"string"==typeof t}function u(t){return t&&t.indexOf("#")>=0&&t.split("#").pop()||""}function d(t){var e=s(t).split(/\?(.*)?$/);return[s(e[0]),e.slice(1).join("")]}function h(t){for(var e={},n=t.split("&"),r=0;r<n.length;r++){var i=n[r].split("=");if(""!==i[0]){var o=decodeURIComponent(i[0]);e[o]?(Array.isArray(e[o])||(e[o]=[e[o]]),e[o].push(decodeURIComponent(i[1]||""))):e[o]=decodeURIComponent(i[1]||"")}}return e}function p(t,e){var n,a=d(s(t.currentLocationPath)),p=a[0],l=a[1],f=""===l?null:h(l),v=[];if(c(e.path)){if(n="(?:/^|^)"+s(e.path).replace(r,(function(t,e,n){return v.push(n),"([^/]+)"})).replace(i,"?(?:.*)").replace(o,"/?([^/]+|)")+"$",""===s(e.path)&&""===s(p))return{url:p,queryString:l,hashString:u(t.to),route:e,data:null,params:f}}else n=e.path;var m=new RegExp(n,""),y=p.match(m);if(y){var g=c(e.path)?function(t,e){return 0===e.length?null:t?t.slice(1,t.length).reduce((function(t,n,r){return null===t&&(t={}),t[e[r]]=decodeURIComponent(n),t}),null):null}(y,v):y.groups?y.groups:y.slice(1);return{url:s(p.replace(new RegExp("^"+t.instance.root),"")),queryString:l,hashString:u(t.to),route:e,data:g,params:f}}return!1}function l(){return!("undefined"==typeof window||!window.history||!window.history.pushState)}function f(t,e){return void 0===t[e]||!0===t[e]}function v(){return"undefined"!=typeof window}function m(t,e){return void 0===t&&(t=[]),void 0===e&&(e={}),t.filter((function(t){return t})).forEach((function(t){["before","after","already","leave"].forEach((function(n){t[n]&&(e[n]||(e[n]=[]),e[n].push(t[n]))}))})),e}function y(t,e,n){var r=e||{},i=0;!function e(){t[i]?Array.isArray(t[i])?(t.splice.apply(t,[i,1].concat(t[i][0](r)?t[i][1]:t[i][2])),e()):t[i](r,(function(t){void 0===t||!0===t?(i+=1,e()):n&&n(r)})):n&&n(r)}()}function g(t,e){void 0===t.currentLocationPath&&(t.currentLocationPath=t.to=a(t.instance.root)),t.currentLocationPath=t.instance._checkForAHash(t.currentLocationPath),e()}function b(t,e){for(var n=0;n<t.instance.routes.length;n++){var r=p(t,t.instance.routes[n]);if(r&&(t.matches||(t.matches=[]),t.matches.push(r),"ONE"===t.resolveOptions.strategy))return void e()}e()}function k(t,e){t.navigateOptions&&(void 0!==t.navigateOptions.shouldResolve&&console.warn('"shouldResolve" is deprecated. Please check the documentation.'),void 0!==t.navigateOptions.silent&&console.warn('"silent" is deprecated. Please check the documentation.')),e()}function P(t,e){!0===t.navigateOptions.force?(t.instance._setCurrent([t.instance._pathToMatchObject(t.to)]),e(!1)):e()}y.if=function(t,e,n){return Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]),[t,e,n]};var C=v(),E=l();function _(t,e){if(f(t.navigateOptions,"updateBrowserURL")){var n=("/"+t.to).replace(/\/\//g,"/"),r=C&&t.resolveOptions&&!0===t.resolveOptions.hash;E?(history[t.navigateOptions.historyAPIMethod||"pushState"](t.navigateOptions.stateObj||{},t.navigateOptions.title||"",r?"#"+n:n),location&&location.hash&&(t.instance.__freezeListening=!0,setTimeout((function(){var e=location.hash;location.hash="",location.hash=e,t.instance.__freezeListening=!1}),1))):C&&(window.location.href=t.to)}e()}function O(t,e){var n=t.instance;n.lastResolved()?y(n.lastResolved().map((function(e){return function(n,r){if(e.route.hooks&&e.route.hooks.leave){var i,o=t.instance.matchLocation(e.route.path,t.currentLocationPath,!1);i="*"!==e.route.path?!o:!(t.matches&&t.matches.find((function(t){return e.route.path===t.route.path}))),f(t.navigateOptions,"callHooks")&&i?y(e.route.hooks.leave.map((function(e){return function(n,r){return e((function(e){!1===e?t.instance.__dirty=!1:r()}),t.matches&&t.matches.length>0?1===t.matches.length?t.matches[0]:t.matches:void 0)}})).concat([function(){return r()}])):r()}else r()}})),{},(function(){return e()})):e()}function S(t,e){f(t.navigateOptions,"updateState")&&t.instance._setCurrent(t.matches),e()}var w=[function(t,e){var n=t.instance.lastResolved();if(n&&n[0]&&n[0].route===t.match.route&&n[0].url===t.match.url&&n[0].queryString===t.match.queryString)return n.forEach((function(e){e.route.hooks&&e.route.hooks.already&&f(t.navigateOptions,"callHooks")&&e.route.hooks.already.forEach((function(e){return e(t.match)}))})),void e(!1);e()},function(t,e){t.match.route.hooks&&t.match.route.hooks.before&&f(t.navigateOptions,"callHooks")?y(t.match.route.hooks.before.map((function(e){return function(n,r){return e((function(e){!1===e?t.instance.__dirty=!1:r()}),t.match)}})).concat([function(){return e()}])):e()},function(t,e){f(t.navigateOptions,"callHandler")&&t.match.route.handler(t.match),t.instance.updatePageLinks(),e()},function(t,e){t.match.route.hooks&&t.match.route.hooks.after&&f(t.navigateOptions,"callHooks")&&t.match.route.hooks.after.forEach((function(e){return e(t.match)})),e()}],I=[O,function(t,e){var n=t.instance._notFoundRoute;if(n){t.notFoundHandled=!0;var r=d(t.currentLocationPath),i=r[0],o=r[1],a=u(t.to);n.path=s(i);var c={url:n.path,queryString:o,hashString:a,data:null,route:n,params:""!==o?h(o):null};t.matches=[c],t.match=c}e()},y.if((function(t){return t.notFoundHandled}),w.concat([S]),[function(t,e){t.resolveOptions&&!1!==t.resolveOptions.noMatchWarning&&void 0!==t.resolveOptions.noMatchWarning||console.warn('Navigo: "'+t.currentLocationPath+"\" didn't match any of the registered routes."),e()},function(t,e){t.instance._setCurrent(null),e()}])];function N(){return(N=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function L(t,e){var n=0;O(t,(function r(){n!==t.matches.length?y(w,N({},t,{match:t.matches[n]}),(function(){n+=1,r()})):S(t,e)}))}function T(t){t.instance.__dirty=!1,t.instance.__waiting.length>0&&t.instance.__waiting.shift()()}function A(){return(A=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function x(t,e){var n,r=e||{strategy:"ONE",hash:!1,noMatchWarning:!1},i=this,o="/",f=null,C=[],E=!1,O=l(),S=v();function w(t){return t.indexOf("#")>=0&&(t=!0===r.hash?t.split("#")[1]||"/":t.split("#")[0]),t}function N(t){return s(o+"/"+s(t))}function x(t,e,n,r){return t=c(t)?N(t):t,{name:r||s(String(t)),path:t,handler:e,hooks:m(n)}}function F(t,e){if(!i.__dirty){i.__dirty=!0,t=t?s(o)+"/"+s(t):void 0;var n={instance:i,to:t,currentLocationPath:t,navigateOptions:{},resolveOptions:A({},r,e)};return y([g,b,y.if((function(t){var e=t.matches;return e&&e.length>0}),L,I)],n,T),!!n.matches&&n.matches}i.__waiting.push((function(){return i.resolve(t,e)}))}function M(t,e){if(i.__dirty)i.__waiting.push((function(){return i.navigate(t,e)}));else{i.__dirty=!0,t=s(o)+"/"+s(t);var n={instance:i,to:t,navigateOptions:e||{},resolveOptions:e&&e.resolveOptions?e.resolveOptions:r,currentLocationPath:w(t)};y([k,P,b,y.if((function(t){var e=t.matches;return e&&e.length>0}),L,I),_,T],n,T)}}function B(){if(S)return(S?[].slice.call(document.querySelectorAll("[data-navigo]")):[]).forEach((function(t){"false"!==t.getAttribute("data-navigo")&&"_blank"!==t.getAttribute("target")?t.hasListenerAttached||(t.hasListenerAttached=!0,t.navigoHandler=function(e){if((e.ctrlKey||e.metaKey)&&"a"===e.target.tagName.toLowerCase())return!1;var n=t.getAttribute("href");if(null==n)return!1;if(n.match(/^(http|https)/)&&"undefined"!=typeof URL)try{var r=new URL(n);n=r.pathname+r.search}catch(t){}var o=function(t){if(!t)return{};var e,n=t.split(","),r={};return n.forEach((function(t){var n=t.split(":").map((function(t){return t.replace(/(^ +| +$)/g,"")}));switch(n[0]){case"historyAPIMethod":r.historyAPIMethod=n[1];break;case"resolveOptionsStrategy":e||(e={}),e.strategy=n[1];break;case"resolveOptionsHash":e||(e={}),e.hash="true"===n[1];break;case"updateBrowserURL":case"callHandler":case"updateState":case"force":r[n[0]]="true"===n[1]}})),e&&(r.resolveOptions=e),r}(t.getAttribute("data-navigo-options"));E||(e.preventDefault(),e.stopPropagation(),i.navigate(s(n),o))},t.addEventListener("click",t.navigoHandler)):t.hasListenerAttached&&t.removeEventListener("click",t.navigoHandler)})),i}function R(t,e,n){var r=C.find((function(e){return e.name===t})),i=null;if(r){if(i=r.path,e)for(var a in e)i=i.replace(":"+a,e[a]);i=i.match(/^\//)?i:"/"+i}return i&&n&&!n.includeRoot&&(i=i.replace(new RegExp("^/"+o),"")),i}function D(t){var e=d(s(t)),r=e[0],i=e[1],o=""===i?null:h(i);return{url:r,queryString:i,hashString:u(t),route:x(r,(function(){}),[n],r),data:null,params:o}}function H(t,e,n){return"string"==typeof e&&(e=j(e)),e?(e.hooks[t]||(e.hooks[t]=[]),e.hooks[t].push(n),function(){e.hooks[t]=e.hooks[t].filter((function(t){return t!==n}))}):(console.warn("Route doesn't exists: "+e),function(){})}function j(t){return"string"==typeof t?C.find((function(e){return e.name===N(t)})):C.find((function(e){return e.handler===t}))}t?o=s(t):console.warn('Navigo requires a root path in its constructor. If not provided will use "/" as default.'),this.root=o,this.routes=C,this.destroyed=E,this.current=f,this.__freezeListening=!1,this.__waiting=[],this.__dirty=!1,this.on=function(t,e,r){var i=this;return"object"!=typeof t||t instanceof RegExp?("function"==typeof t&&(r=e,e=t,t=o),C.push(x(t,e,[n,r])),this):(Object.keys(t).forEach((function(e){if("function"==typeof t[e])i.on(e,t[e]);else{var r=t[e],o=r.uses,a=r.as,s=r.hooks;C.push(x(e,o,[n,s],a))}})),this)},this.off=function(t){return this.routes=C=C.filter((function(e){return c(t)?s(e.path)!==s(t):"function"==typeof t?t!==e.handler:String(e.path)!==String(t)})),this},this.resolve=F,this.navigate=M,this.navigateByName=function(t,e,n){var r=R(t,e);return null!==r&&(M(r,n),!0)},this.destroy=function(){this.routes=C=[],O&&window.removeEventListener("popstate",this.__popstateListener),this.destroyed=E=!0},this.notFound=function(t,e){return i._notFoundRoute=x("*",t,[n,e],"__NOT_FOUND__"),this},this.updatePageLinks=B,this.link=function(t){return"/"+o+"/"+s(t)},this.hooks=function(t){return n=t,this},this.extractGETParameters=function(t){return d(w(t))},this.lastResolved=function(){return f},this.generate=R,this.getLinkPath=function(t){return t.getAttribute("href")},this.match=function(t){var e={instance:i,currentLocationPath:t,to:t,navigateOptions:{},resolveOptions:r};return b(e,(function(){})),!!e.matches&&e.matches},this.matchLocation=function(t,e,n){void 0===e||void 0!==n&&!n||(e=N(e));var r={instance:i,to:e,currentLocationPath:e};return g(r,(function(){})),"string"==typeof t&&(t=void 0===n||n?N(t):t),p(r,{name:String(t),path:t,handler:function(){},hooks:{}})||!1},this.getCurrentLocation=function(){return D(s(a(o)).replace(new RegExp("^"+o),""))},this.addBeforeHook=H.bind(this,"before"),this.addAfterHook=H.bind(this,"after"),this.addAlreadyHook=H.bind(this,"already"),this.addLeaveHook=H.bind(this,"leave"),this.getRoute=j,this._pathToMatchObject=D,this._clean=s,this._checkForAHash=w,this._setCurrent=function(t){return f=i.current=t},function(){O&&(this.__popstateListener=function(){i.__freezeListening||F()},window.addEventListener("popstate",this.__popstateListener))}.call(this),B.call(this)}}},e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}return n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n(407)})().default},379:(t,e,n)=>{"use strict";var r,i=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function a(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function s(t,e){for(var n={},r=[],i=0;i<t.length;i++){var s=t[i],c=e.base?s[0]+e.base:s[0],u=n[c]||0,d="".concat(c," ").concat(u);n[c]=u+1;var h=a(d),p={css:s[1],media:s[2],sourceMap:s[3]};-1!==h?(o[h].references++,o[h].updater(p)):o.push({identifier:d,updater:v(p,e),references:1}),r.push(d)}return r}function c(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var a=i(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var u,d=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function h(t,e,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=d(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function p(t,e,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var l=null,f=0;function v(t,e){var n,r,i;if(e.singleton){var o=f++;n=l||(l=c(e)),r=h.bind(null,n,o,!1),i=h.bind(null,n,o,!0)}else n=c(e),r=p.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var i=a(n[r]);o[i].references--}for(var c=s(t,e),u=0;u<n.length;u++){var d=a(n[u]);0===o[d].references&&(o[d].updater(),o.splice(d,1))}n=c}}}},843:(t,e,n)=>{"use strict";var r=n(379),i=n.n(r),o=n(569);i()(o.Z,{insert:"head",singleton:!1}),o.Z.locals;var a=n(123),s=n.n(a),c="SIP-calculator";const u=function(){function t(){this.events=new Map}return t.prototype.addEvent=function(t,e){var n=this.events.get(t);n?n.push(e):this.events.set(t,[e])},t.prototype.removeEvent=function(t,e){var n=this.events.get(t);if(n){var r=n.findIndex((function(t){return t===e}));n.splice(r,1)}},t.prototype.emit=function(t){var e=this.events.get(t);e&&e.forEach((function(e){return e(t)}))},t}();var d;!function(t){t.OPEN_EXTERNAL_NUMBER="OPEN_EXTERNAL_NUMBER",t.ADD_NUMBER_TO_CART="ADD_NUMBER_TO_CART",t.ADD_PACKAGE_TO_CART="ADD_PACKAGE_TO_CART",t.PBX_CHECKBOX_TOGGLED="PBX_CHECKBOX_TOGGLED",t.OPEN_SUMMARY_POPUP="OPEN_SUMMARY_POPUP",t.HIDE_POPUP="HIDE_POPUP"}(d||(d={}));const h=function(){function t(t){this.eventEmmiter=new u,this.router=t}return t.prototype.openExternalNumber=function(t){this.router.navigate(c+"/number/"+t)},t.prototype.hidePopup=function(){this.eventEmmiter.emit(d.HIDE_POPUP),this.router.navigate(c)},t.prototype.addNumberToCart=function(t){this.numberOrder=t,this.eventEmmiter.emit(d.ADD_NUMBER_TO_CART)},t.prototype.addPackageToCart=function(t){this.packageOrder=t,this.eventEmmiter.emit(d.ADD_PACKAGE_TO_CART)},t.prototype.tooglePBXCheckbox=function(){this.eventEmmiter.emit(d.PBX_CHECKBOX_TOGGLED)},t.prototype.openSummaryPopup=function(){this.eventEmmiter.emit(d.OPEN_SUMMARY_POPUP)},t}();var p=function(){function t(){this.numbers=[]}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.isEmptyOrder=function(){return 0===this.numbers.length&&void 0===this.package},t.prototype.setPackage=function(t){this.package=t},t.prototype.removePackage=function(){this.package=void 0},t.prototype.addNumber=function(t){this.numbers.push(t)},t.prototype.removeNumber=function(t){if(t<0||t>=this.numbers.length)throw new Error("Index must me greather than -1 and less than numbers length");this.numbers.splice(t,1)},t.prototype.getTotalCost=function(){for(var t=0,e=0,n=0,r=this.numbers;n<r.length;n++){var i,o=r[n];t+=(i=this.getNumberCost(o)).numbersCost.firstPay+i.trunksCost.firstPay,e+=i.numbersCost.monthlyFee+i.trunksCost.monthlyFee}return this.package&&(t+=(i=this.getPackageCost()).cost.firstPay,e+=i.cost.monthlyFee),{firstPay:t,monthlyFee:e}},t.prototype.getNumbers=function(){var t=this;return this.numbers.map((function(e){return t.getNumberCost(e)}))},t.prototype.getNumberCost=function(t){var e=t.number;return{number:e,numbersCost:{count:t.numsCount,firstPay:e.numberFirstPay*t.numsCount,monthlyFee:e.numberMonthlyFee*t.numsCount},trunksCost:{count:t.trunksCount,firstPay:e.trunkFirstPay*t.trunksCount,monthlyFee:e.trunkMonthlyFee*t.trunksCount}}},t.prototype.getPackageCost=function(){if(this.package){var t=this.package.functions,e={count:this.package.employees,firstPay:this.package.package.firstPay*this.package.employees,monthlyFee:this.package.package.monthlyFee*this.package.employees};return{package:this.package.package,cost:e,functions:t}}},t}(),l=[{name:"Золотой",level:1,description:"Одинаковые 4 цифры, или 3 последние цифры равны нулю, или цифры зеркальны.",examples:["+375 740 740 9999","+375 740 740 9000","+375 740 740 9229"],image:"Gold.png",numberFirstPay:40,numberMonthlyFee:3,trunkFirstPay:10,trunkMonthlyFee:7},{name:"Серебрянный",level:2,description:"Одинаковые 4 цифры, или 3 последние цифры равны нулю, или цифры зеркальны.",examples:["+375 740 740 9999","+375 740 740 9000","+375 740 740 9229"],image:"Silver.png",numberFirstPay:40,numberMonthlyFee:3,trunkFirstPay:10,trunkMonthlyFee:7},{name:"Бронзовый",level:3,description:"Одинаковые 4 цифры, или 3 последние цифры равны нулю, или цифры зеркальны.",examples:["+375 740 740 9999","+375 740 740 9000","+375 740 740 9229"],image:"Bronze.png",numberFirstPay:40,numberMonthlyFee:3,trunkFirstPay:10,trunkMonthlyFee:7},{name:"Случайный",level:4,description:"Одинаковые 4 цифры, или 3 последние цифры равны нулю, или цифры зеркальны.",examples:["+375 740 740 9999","+375 740 740 9000","+375 740 740 9229"],image:"Random.png",numberFirstPay:40,numberMonthlyFee:3,trunkFirstPay:10,trunkMonthlyFee:7}],f={packages:[{name:"BASIC",description:"Стандартный пакет. включенный в каждый тарифный план SIP",firstPay:12,monthlyFee:4,functions:[{functionId:1,included:!0},{functionId:2,included:!0},{functionId:3,included:!1},{functionId:4,included:!1},{functionId:5,included:!1},{functionId:6,included:!1},{functionId:7,included:!1}]},{name:"Package 1",description:"Стандартный пакет. включенный в каждый тарифный план SIP",firstPay:12,monthlyFee:4,functions:[{functionId:1,included:!0},{functionId:2,included:!0},{functionId:3,included:!0},{functionId:4,included:!1},{functionId:5,included:!1},{functionId:6,included:!1},{functionId:7,included:!1}]},{name:"Package 2",description:"Стандартный пакет. включенный в каждый тарифный план SIP",firstPay:12,monthlyFee:4,functions:[{functionId:1,included:!0},{functionId:2,included:!0},{functionId:3,included:!0},{functionId:4,included:!0},{functionId:5,included:!0},{functionId:6,included:!1},{functionId:7,included:!1}]},{name:"Package 3",description:"Стандартный пакет. включенный в каждый тарифный план SIP",firstPay:12,monthlyFee:4,functions:[{functionId:1,included:!0},{functionId:2,included:!0},{functionId:3,included:!0},{functionId:4,included:!0},{functionId:5,included:!0},{functionId:6,included:!0},{functionId:7,included:!0}]}],functions:[{id:1,name:"3-х сторонняя конференция (3WAY)",description:""},{id:2,name:"Запрет анонимных вызовов (ACB)",description:""},{id:3,name:"Автодозвон (Autoredial)",description:""},{id:4,name:"Автодозвон с обратным вызовом (AutoredialWithCB)",description:""},{id:5,name:"Переадресация вызова по занятости (CFB)",description:""},{id:6,name:"Переадресация вызова по неответу (CFNR)",description:""},{id:7,name:"Переадресация по недоступности (CFOS)",description:""}]};function v(t,e,n,r){var i=document.createElement(e);return n.forEach((function(t){i.classList.add(t)})),r&&(i.textContent=r),t.append(i),i}var m,y=function(){function t(t,e,n){this.isEnabled=!0,this.packagesSet=t,this.parentElement=e,this.store=n,this.addPackageToCart=this.addPackageToCart.bind(this),this.toggleInteraction=this.toggleInteraction.bind(this)}return t.prototype.render=function(){this.wrapper=v(this.parentElement,"div",[]),this.grid=v(this.wrapper,"div",["package-container__table"]),this.grid.style.gridTemplateColumns="auto repeat("+this.packagesSet.packages.length+",1fr)",this.renderHeader();for(var t=0;t<this.packagesSet.functions.length;t++)this.renderRow(t);this.renderButtons(),this.store.eventEmmiter.addEvent(d.PBX_CHECKBOX_TOGGLED,this.toggleInteraction)},t.prototype.renderHeader=function(){v(this.grid,"div",["func"],"Название функции").id="title";for(var t=0,e=this.packagesSet.packages;t<e.length;t++){var n=e[t];v(this.grid,"div",["package"],n.name).id="title"}},t.prototype.renderRow=function(t){var e=this.packagesSet.functions[t];v(this.grid,"div",["func"],e.name);for(var n=0,r=this.packagesSet.packages;n<r.length;n++){var i=r[n].functions[t].included,o=v(this.grid,"div",["package"]);this.renderStateMark(o,i)}},t.prototype.renderStateMark=function(t,e){var n=v(t,"div",[]);e?(n.classList.add("check"),v(n,"img",[]).src="public/images/check-mark.svg"):(n.classList.add("cross"),v(n,"img",[]).src="public/images/cross-mark.svg")},t.prototype.renderButtons=function(){var t=this;v(this.grid,"div",[]),this.packagesSet.packages.forEach((function(e,n){t.renderButton(e,n)}))},t.prototype.renderButton=function(t,e){var n=v(this.grid,"div",["btn-container"]);v(n,"div",["first"],t.firstPay+" BYN"),v(n,"div",["monthly"],t.monthlyFee+" BYN/мес");var r=v(n,"div",["add-btn"],"Выбрать");r.dataset.id=e.toString(),r.addEventListener("click",this.addPackageToCart)},t.prototype.getPackage=function(t){var e=+t.target.closest(".add-btn").dataset.id;return this.packagesSet.packages[e]},t.prototype.addPackageToCart=function(t){},t.prototype.toggleInteraction=function(){this.isEnabled?this.disable():this.enable(),this.isEnabled=!this.isEnabled},t.prototype.disable=function(){this.tableOverlay=v(this.wrapper,"div",["packages-overlay"]),this.tableOverlay.style.left=this.wrapper.offsetLeft+"px",this.tableOverlay.style.top=this.wrapper.offsetTop+"px",this.tableOverlay.style.width=this.wrapper.offsetWidth+"px",this.tableOverlay.style.height=this.wrapper.offsetHeight+"px"},t.prototype.enable=function(){this.wrapper.removeChild(this.tableOverlay)},t}(),g=(m=function(t,e){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),b=function(t){function e(e,n,r){var i=t.call(this,e,n,r)||this;return i.isDiabled=!1,i.onCheckboxChanged=i.onCheckboxChanged.bind(i),i}return g(e,t),e.prototype.render=function(){var e=this;this.container=v(this.parentElement,"div",["package-header"]),this.renderTitle(),this.renderCheckMark(),this.renderEmploeesSelection(),t.prototype.render.call(this),window.addEventListener("resize",(function(){e.toggleInteraction(),e.toggleInteraction()}))},e.prototype.renderTitle=function(){v(this.container,"div",["title"],"Пакеты функций виртуальной АТС")},e.prototype.renderCheckMark=function(){var t=v(this.container,"div",["check-container"]),e=v(t,"input",["checkbox"]);e.type="checkbox",e.addEventListener("change",this.onCheckboxChanged),v(t,"div",["content"],"Уже есть своя АТС")},e.prototype.onCheckboxChanged=function(t){this.store.tooglePBXCheckbox()},e.prototype.renderEmploeesSelection=function(){this.employeesContainer=v(this.container,"div",["employees"]);var t=v(this.employeesContainer,"div",["content"]);v(t,"div",["title"],"Количество сотрудников"),v(t,"div",["subtitle"],"Необходимо указать для расчета стоимости пакета"),this.employeesInput=v(this.employeesContainer,"input",[]),this.employeesInput.value="4",this.employeesInput.type="number"},e.prototype.addPackageToCart=function(e){t.prototype.addPackageToCart.call(this,e);var n=this.getPackage(e),r=this.packagesSet.functions.filter((function(t){var e=n.functions.filter((function(t){return t.included})).length;return t.id<=e})),i={package:n,employees:+this.employeesInput.value,functions:r};this.store.addPackageToCart(i)},e.prototype.disable=function(){this.overlay=v(this.employeesContainer,"div",["packages-overlay"]),this.overlay.style.left=this.employeesContainer.offsetLeft+"px",this.overlay.style.top=this.employeesContainer.offsetTop+"px",this.overlay.style.width=this.employeesContainer.offsetWidth+"px",this.overlay.style.height=this.employeesContainer.offsetHeight+"px",t.prototype.disable.call(this)},e.prototype.enable=function(){this.employeesContainer.removeChild(this.overlay),t.prototype.enable.call(this)},e}(y),k=function(){function t(t,e){this.parentElement=t,this.store=e,this.hide=this.hide.bind(this),this.dispose=this.dispose.bind(this)}return t.prototype.render=function(){this.container=v(this.parentElement,"div",["popup-container"]),this.overlay=v(this.parentElement,"div",["popup-overlay"]),this.overlay.addEventListener("click",this.hide)},t.prototype.hide=function(t){t.stopPropagation(),this.dispose()},t.prototype.dispose=function(){this.parentElement.removeChild(this.container),this.parentElement.removeChild(this.overlay),this.store.hidePopup()},t.prototype.addContainerStyle=function(t){this.container.classList.add(t)},t}(),P=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),C=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.calculator=r,i}return P(e,t),e.prototype.render=function(){t.prototype.render.call(this),t.prototype.addContainerStyle.call(this,"calculation-popup"),this.renderHeader(),this.renderNumbers(),this.renderPackage(),this.renderSummaryButtons()},e.prototype.renderHeader=function(){var t=v(this.container,"div",["header"]);v(t,"div",["title"],"Детализация заказа SIP-телефонии"),v(t,"img",[]).src="SIP-calculator/public/images/logo.svg",this.renderDividingLine()},e.prototype.renderNumbers=function(){for(var t=0,e=this.calculator.getNumbers();t<e.length;t++){var n=e[t];this.renderNumber(n),this.renderDividingLine()}},e.prototype.renderNumber=function(t){var e=v(this.container,"div",["number"]);v(e,"div",["name"],t.number.name+" номер"),v(e,"div",["description"],t.number.description);var n=v(e,"div",["cost-container"]);this.renderCostBlock("Количество номеров",t.numbersCost,n),this.renderCostBlock("Количество линий",t.trunksCost,n)},e.prototype.renderCostBlock=function(t,e,n){var r=v(n,"div",["cost-block"]);v(r,"div",["title"],t+": "+e.count);var i=v(r,"div",["cost-wrapper"]),o=v(i,"div",["cost"]);v(o,"div",["price"],e.firstPay+" BYN"),v(o,"div",["mark"],"Установочная плата");var a=v(i,"div",["cost"]);v(a,"div",["price"],e.monthlyFee+" BYN/мес"),v(a,"div",["mark"],"Абонентская плата")},e.prototype.renderPackage=function(){var t=this.calculator.getPackageCost();if(t){var e=v(this.container,"div",["package"]);this.renderPackageFunctions(e,t),this.renderCostBlock("Количество сотрудников",t.cost,e)}},e.prototype.renderPackageFunctions=function(t,e){var n=v(t,"div",["functions"]);v(n,"div",["title"],e.package.name);for(var r=0,i=e.functions;r<i.length;r++)v(n,"div",["func"],i[r].name)},e.prototype.renderDividingLine=function(){v(this.container,"div",["dividing-line"])},e.prototype.renderSummaryButtons=function(){var t=v(this.container,"div",["btns-container"]);v(t,"div",[]);var e=v(t,"div",["btns"]),n=this.calculator.getTotalCost(),r=v(e,"div",["btn"]),i=v(e,"div",["btn"]);v(r,"div",["price"],n.firstPay+n.monthlyFee+" BYN"),v(r,"div",["mark"],"Первый платеж"),v(i,"div",["price"],n.monthlyFee+" BYN/мес"),v(i,"div",["mark"],"Ежемесячный платеж")},e}(k),E=function(){function t(t,e,n){this.parentElement=t,this.store=e,this.calculator=n,this.openSummaryPopup=this.openSummaryPopup.bind(this),this.removeNumber=this.removeNumber.bind(this),this.removePackage=this.removePackage.bind(this),this.togglePackageContainer=this.togglePackageContainer.bind(this)}return t.prototype.render=function(){this.container=v(this.parentElement,"div",["cart-container"]),this.renderHeader(),this.renderNumberContainer(),this.renderPackageContainer(),this.renderFistPay(),this.renderMonthlyFee(),this.renderButtons(),this.store.eventEmmiter.addEvent(d.PBX_CHECKBOX_TOGGLED,this.togglePackageContainer)},t.prototype.renderHeader=function(){v(this.container,"div",["header"]).textContent="Расчет стоимости оказания услуг по SIP-телефонии"},t.prototype.renderNumberContainer=function(){this.numberContainer=v(this.container,"div",["numbers-container"])},t.prototype.renderPackageContainer=function(){this.packageContainer=v(this.container,"div",["package-container"])},t.prototype.renderFistPay=function(){this.firstPayElement=this.renderPayContainer("Установочная плата","Единоразовый платеж при подключении","0.00")},t.prototype.renderMonthlyFee=function(){this.monthlyFeeElement=this.renderPayContainer("Ежемесячная абонентская плата","Ежемесячная плата за использование SIP-телефонии","0.00")},t.prototype.renderPayContainer=function(t,e,n){var r=v(this.container,"div",["pay-container"]),i=v(r,"div",["content"]);return v(i,"div",["title"],t),v(i,"div",["desc"],e),v(r,"div",["value"],n)},t.prototype.renderButtons=function(){var t=v(this.container,"div",["btns-container__summary"]);v(t,"div",["btn","send"],"Отправить на E-mail"),v(t,"div",["btn","summary"],"Показать расчет").addEventListener("click",this.openSummaryPopup)},t.prototype.openSummaryPopup=function(){this.store.openSummaryPopup()},t.prototype.addNumber=function(t){var e=v(this.numberContainer,"div",["number"]),n=v(e,"div",["container"]),r=v(n,"div",["image"]);v(r,"img",[]).src="SIP-calculator/public/images/"+t.number.image;var i=v(n,"div",["content"]);v(i,"div",["name"],t.number.name+" номер"),v(i,"div",["count"],"Количество номеров: "+t.numsCount),v(i,"div",["count"],"Количество линий: "+t.trunksCount);var o=v(e,"div",["btns-container"]),a=v(o,"div",["btn"]),s=v(o,"div",["btn"]),c=v(a,"img",["icon"]),u=v(s,"img",["icon"]);s.addEventListener("click",this.removeNumber),c.src="SIP-calculator/public/images/edit.svg",u.src="SIP-calculator/public/images/delete.svg",this.calculator.addNumber(t),this.updatePrices()},t.prototype.removeNumber=function(t){var e=t.target.closest(".number"),n=[].indexOf.call(this.numberContainer.children,e);this.calculator.removeNumber(n),this.updatePrices(),this.numberContainer.removeChild(e)},t.prototype.addPackage=function(t){this.packageContainer.innerHTML="";var e=t.package,n=v(this.packageContainer,"div",["container"]),r=v(this.packageContainer,"div",["container"]);v(n,"div",["title"],e.name),v(r,"div",["description"],e.description),v(n,"div",["employees"],"Сотрудников: "+t.employees);var i=v(r,"div",["btn"]);v(i,"img",[]).src="SIP-calculator/public/images/delete.svg",i.addEventListener("click",this.removePackage),this.calculator.setPackage(t),this.updatePrices()},t.prototype.removePackage=function(){this.calculator.removePackage(),this.updatePrices(),this.packageContainer.innerHTML=""},t.prototype.updatePrices=function(){var t=this.calculator.getTotalCost();this.firstPayElement.textContent=""+t.firstPay,this.monthlyFeeElement.textContent=""+t.monthlyFee},t.prototype.togglePackageContainer=function(){this.removePackage(),this.packageContainer.classList.toggle("disabled")},t}();function _(t){return t.description+"<br>Пример:<br>"+t.examples.join("<br>")}var O,S=function(){function t(t,e,n){this.numbers=t,this.parentElement=e,this.store=n,this.openPopup=this.openPopup.bind(this),this.onDescriptionMouseEnter=this.onDescriptionMouseEnter.bind(this)}return t.prototype.render=function(){var t=this;this.overlay=v(this.parentElement,"div",["external-numbers__overlay"]),this.container=v(this.overlay,"div",["external-numbers__container"]),this.numbers.forEach((function(e,n){t.renderNumber(e,n)}))},t.prototype.renderNumber=function(t,e){var n=v(this.container,"div",["external-number"]);n.dataset.id=e.toString(),n.addEventListener("click",this.openPopup),this.renderNumberImage(n,t),this.renderNumberContent(n,t),this.renderDescriptionButton(n,t)},t.prototype.openPopup=function(t){var e=t.target,n=this.getClosestContainer(e).dataset.id;this.store.openExternalNumber(n)},t.prototype.renderNumberImage=function(t,e){v(t,"img",[]).src="public/images/"+e.image},t.prototype.renderNumberContent=function(t,e){var n=v(t,"div",["content"]);v(n,"div",["level"],"Уровень "+e.level),v(n,"div",["name"],e.name),v(n,"div",["cost"],e.numberFirstPay+" BYN")},t.prototype.renderDescriptionButton=function(t,e){var n=v(t,"div",["description-mark"]);v(n,"img",[]).src="public/images/question-mark.svg",n.addEventListener("mouseenter",this.onDescriptionMouseEnter)},t.prototype.onDescriptionMouseEnter=function(t){var e=this,n=t.target,r=this.getClosestContainer(n),i=this.getExternalNumber(r),o=v(this.overlay,"div",["description"]);o.style.left=n.offsetLeft+"px",o.style.top=n.offsetTop+n.offsetHeight+"px",o.innerHTML=_(i);var a=function(){e.overlay.removeChild(o),n.removeEventListener("mouseleave",a)};n.addEventListener("mouseleave",a)},t.prototype.getClosestContainer=function(t){return t.closest(".external-number")},t.prototype.getExternalNumber=function(t){var e=+t.dataset.id;return this.numbers[e]},t}(),w=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){t.number="number",t.trunk="trunk"}(O||(O={}));var I=function(t){function e(e,n,r){var i=t.call(this,n,r)||this;return i.number=e,i.addToCart=i.addToCart.bind(i),i}return w(e,t),e.prototype.render=function(){t.prototype.render.call(this),t.prototype.addContainerStyle.call(this,"number-popup"),this.renderHeader(),this.renderDescription(),this.renderDividingLine(),this.renderNumberSelection(),this.renderDividingLine(),this.renderTrunkSelection(),this.renderDividingLine(),this.renderButtons()},e.prototype.renderHeader=function(){var t=v(this.container,"div",["header"]);v(t,"img",[]).src="../public/images/"+this.number.image;var e=v(t,"div",["content"]);v(e,"div",["level"],"Уровень "+this.number.level),v(e,"div",["name"],this.number.name+" номер")},e.prototype.renderDescription=function(){v(this.container,"div",["popup-description"]).innerHTML=_(this.number)},e.prototype.renderNumberSelection=function(){this.numbersInput=this.renderSelection("Количество номеров",O.number,4)},e.prototype.renderTrunkSelection=function(){this.trunksInput=this.renderSelection("Количество линий (Всего)",O.trunk,16)},e.prototype.renderSelection=function(t,e,n){var r=v(this.container,"div",["selector-container"]),i=v(r,"div",["content"]);v(i,"div",["title"],t);var o=v(i,"div",["cost"]);return e===O.number?(v(o,"div",[],"Установочная плата: "+this.number.numberFirstPay+" BYN"),v(o,"div",[],"Абонентская плата: "+this.number.trunkMonthlyFee+" BYN")):(v(o,"div",[],"Установочная плата: "+this.number.trunkFirstPay+" BYN"),v(o,"div",[],"Абонентская плата: "+this.number.trunkMonthlyFee+" BYN")),this.renderInput(r,n)},e.prototype.renderInput=function(t,e){var n=v(t,"input",[]);return n.type="number",n.value=e.toString(),n},e.prototype.renderDividingLine=function(){v(this.container,"div",["dividing-line"])},e.prototype.renderButtons=function(){var t=v(this.container,"div",["btns-container"]);v(t,"div",["btn","btn-cancel"],"Отменить").addEventListener("click",this.dispose),v(t,"div",["btn","btn-add"],"Добавить").addEventListener("click",this.addToCart)},e.prototype.addToCart=function(){var t={number:this.number,numsCount:+this.numbersInput.value,trunksCount:+this.trunksInput.value};this.store.addNumberToCart(t),this.dispose()},e}(k),N=function(){function t(t,e,n){this.parentElement=t,this.store=e,this.router=n,this.openExternalNumber=this.openExternalNumber.bind(this),this.openSummaryPopup=this.openSummaryPopup.bind(this),this.addNumberToCart=this.addNumberToCart.bind(this),this.addPackageToCart=this.addPackageToCart.bind(this),this.hidePopup=this.hidePopup.bind(this)}return t.prototype.render=function(){var t=v(this.parentElement,"div",["left-container"]);this.leftContainer=v(t,"div",["wrapper"]),this.rightContainer=v(this.parentElement,"div",["right-container"]),this.renderOffers(),this.renderCart(),this.initRoutes(),this.store.eventEmmiter.addEvent(d.ADD_NUMBER_TO_CART,this.addNumberToCart),this.store.eventEmmiter.addEvent(d.ADD_PACKAGE_TO_CART,this.addPackageToCart),this.store.eventEmmiter.addEvent(d.OPEN_SUMMARY_POPUP,this.openSummaryPopup),this.store.eventEmmiter.addEvent(d.HIDE_POPUP,this.hidePopup)},t.prototype.renderOffers=function(){v(this.leftContainer,"div",["header-title"],"SIP-Калькулятор"),v(this.leftContainer,"div",["numbers-subtitle"],"Внешние номера"),this.numbers=l,new S(this.numbers,this.leftContainer,this.store).render(),this.packageSet=f,new b(this.packageSet,this.leftContainer,this.store).render(),v(this.leftContainer,"img",["logo"]).src="SIP-calculator/public/images/logo.svg"},t.prototype.renderCart=function(){this.calculator=p.getInstance(),this.cart=new E(this.rightContainer,this.store,this.calculator),this.cart.render()},t.prototype.initRoutes=function(){this.router.on(c+"/",(function(){})),this.router.on(c+"/number/:id",this.openExternalNumber),this.router.resolve()},t.prototype.openExternalNumber=function(){var t=this;setTimeout((function(){var e=+window.location.pathname.split("/").pop(),n=t.numbers[e];t.popup=new I(n,t.leftContainer,t.store),t.popup.render()}),0)},t.prototype.addNumberToCart=function(){var t=this.store.numberOrder;this.cart.addNumber(t)},t.prototype.addPackageToCart=function(){var t=this.store.packageOrder;this.cart.addPackage(t)},t.prototype.openSummaryPopup=function(){console.log(this.popup,this.calculator.isEmptyOrder()),this.popup||this.calculator.isEmptyOrder()||(this.popup=new C(this.leftContainer,this.store,this.calculator),this.popup.render())},t.prototype.hidePopup=function(){this.popup=void 0},t}(),L=new(s())("/"),T=new h(L);new N(document.body,T,L).render()}},0,[[843,666]]]);